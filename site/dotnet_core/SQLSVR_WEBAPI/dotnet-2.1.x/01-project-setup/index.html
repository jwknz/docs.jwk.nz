



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for repositories that I have made">
      
      
        <link rel="canonical" href="https://docs.jwk.nz/dotnet_core/SQLSVR_WEBAPI/dotnet-2.1.x/01-project-setup/">
      
      
        <meta name="author" content="Jeffrey Kranenburg">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.2">
    
    
      
        <title>Project Setup - docs.jwk.nz</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.3020aac5.css">
      
        <link rel="stylesheet" href="../../../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../../../../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#project_setup" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.jwk.nz/" title="docs.jwk.nz" class="md-header-nav__button md-logo">
          
            <i class="md-icon">î Œ</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              docs.jwk.nz
            </span>
            <span class="md-header-nav__topic">
              Project Setup
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/jwknz/docs.jwk.nz/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    jwknz/docs.jwk.nz
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.jwk.nz/" title="docs.jwk.nz" class="md-nav__button md-logo">
      
        <i class="md-icon">î Œ</i>
      
    </a>
    docs.jwk.nz
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/jwknz/docs.jwk.nz/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    jwknz/docs.jwk.nz
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../.." title="JWKNZ Docs" class="md-nav__link">
      JWKNZ Docs
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Dotnet core
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Dotnet core
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../" title="Dotnet Core" class="md-nav__link">
      Dotnet Core
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2" checked>
    
    <label class="md-nav__link" for="nav-2-2">
      SQLSVR WEBAPI
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        SQLSVR WEBAPI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2-2" type="checkbox" id="nav-2-2-2" checked>
    
    <label class="md-nav__link" for="nav-2-2-2">
      Dotnet 2.1.x
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-2-2">
        Dotnet 2.1.x
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="Project Setup" class="md-nav__link md-nav__link--active">
      Project Setup
    </a>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02-create-api/" title="Creating an API" class="md-nav__link">
      Creating an API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03-exercise-01/" title="Exercises" class="md-nav__link">
      Exercises
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04-testing-the-api/" title="Testing the api using VSCODE" class="md-nav__link">
      Testing the api using VSCODE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../05-adding-a-web-form/" title="Consuming the API" class="md-nav__link">
      Consuming the API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Git
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Git
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../git/00_Installing_git/" title="Installing git" class="md-nav__link">
      Installing git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../git/01_what_is_git/" title="What is git" class="md-nav__link">
      What is git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../git/02_basic_commands/" title="Basic Commands" class="md-nav__link">
      Basic Commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../git/03_how_does_git_work/" title="How does it all work?" class="md-nav__link">
      How does it all work?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../git/04_basic_workflow/" title="Basic Workflow" class="md-nav__link">
      Basic Workflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../git/05_basic_workflow_images/" title="Git stages" class="md-nav__link">
      Git stages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../git/06_branches/" title="Using Branches" class="md-nav__link">
      Using Branches
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../git/07_gitignore/" title="Gitignore" class="md-nav__link">
      Gitignore
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../git/08_exercises/" title="Exercises" class="md-nav__link">
      Exercises
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../git/09_faqs/" title="GIT FAQ" class="md-nav__link">
      GIT FAQ
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Mern
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Mern
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../mern/" title="Creating a Web Api using MERN" class="md-nav__link">
      Creating a Web Api using MERN
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Package managers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Package managers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../package_managers/npm/" title="NPM - Node Package Manager" class="md-nav__link">
      NPM - Node Package Manager
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Php
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Php
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../php/01-container-setup/" title="Setup new container" class="md-nav__link">
      Setup new container
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-2" type="checkbox" id="nav-6-2">
    
    <label class="md-nav__link" for="nav-6-2">
      Mvc framework
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-2">
        Mvc framework
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../php/mvc-framework/01-index/" title="Basic MVC Framework" class="md-nav__link">
      Basic MVC Framework
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../php/mvc-framework/02-setup/" title="Setup MVC Project" class="md-nav__link">
      Setup MVC Project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../php/mvc-framework/03-how-it-works/" title="How to setup MVC" class="md-nav__link">
      How to setup MVC
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../php/mvc-framework/04-mvc/" title="APP : Models - Views - Controllers" class="md-nav__link">
      APP : Models - Views - Controllers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../php/mvc-framework/05-exercise-1/" title="Creating your first MVC Project" class="md-nav__link">
      Creating your first MVC Project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../php/mvc-framework/06-exercise-2/" title="Loading your database" class="md-nav__link">
      Loading your database
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Web
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Web
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../web/01-introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../web/02-setting-up-project/" title="Project Setup" class="md-nav__link">
      Project Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../web/03-push-and-deploy/" title="Pushing our code to GitHub" class="md-nav__link">
      Pushing our code to GitHub
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../web/04-parcel/" title="Using parceljs" class="md-nav__link">
      Using parceljs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../web/05-exercises/" title="Exercises" class="md-nav__link">
      Exercises
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/jwknz/docs.jwk.nz/edit/master/docs/dotnet_core/SQLSVR_WEBAPI/dotnet-2.1.x/01-project-setup.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="project_setup">Project Setup<a class="headerlink" href="#project_setup" title="Permanent link">&para;</a></h1>
<p>In this project, we are going to look at how to build a webapi that connects to a MSSQL database.</p>
<p>The idea (and use case) for this api is to be able to connect any (1 or more) application(s) to a database on a remote or local server without having to store any sensitive information within the application itself.</p>
<p>The credentails for the databse will be loaded using environment variables and the system is setup using docker containers, so it is easily deployable.</p>
<p>So let's get started!</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>For this tutorial I assume you have the following installed:</p>
<ul>
<li>VSCODE</li>
<li>Docker (docker-toolbox or docker for your operating system)<ul>
<li>You will need to adjust your docker setup or Virtual Box docker VM to support 2GB of RAM to support the MSSQL Server</li>
</ul>
</li>
<li>Git (which will give you git bash on Windows)</li>
</ul>
</div>
<details class="attention"><summary>If you do not have docker installed</summary><p>Although the tutorial assumes you use docker, it is only used to run the MSSQL server.<br />
If you do not have this option, you will need to do the following:</p>
<ul>
<li>You need to use the Windows operating system</li>
<li>Download and install <a href="https://go.microsoft.com/fwlink/?linkid=853017">the express edition of MSSQL Server</a></li>
</ul>
<p>Your username and password will be whatever you set it to be during the setup process.  </p>
</details>
<h1 id="create_a_new_project">Create a new project<a class="headerlink" href="#create_a_new_project" title="Permanent link">&para;</a></h1>
<div class="admonition note">
<p class="admonition-title">How to use the instructions</p>
<ul>
<li>When it says "Type in" it means type in the terminal  </li>
<li>The <code>&lt;projectname&gt;</code> is a placeholder - type in your own name, but do not type in the angle brackets</li>
</ul>
</div>
<p>Not all of these steps are required, but they are useful and they will help you build a good API (and coding habits) - so treat them as if they are all required.</p>
<div class="admonition note">
<p class="admonition-title">If you don't use git</p>
<p>Git should be used to manage your code, it is industry standard and in a way the easiest way to manage your code.</p>
<p>The alternative is for you to keep copying your work into other folders. I am assuming you use git - so if you don't you will need to find your own work around.</p>
</div>
<p>Open the Gitbash terminal (from here just reffered to as the terminal) and create your project.</p>
<p>Navigate to your code folder, I have mine setup in my users directory - which is where it should be if you are using docker for toolbox, but otherwise anywhere will do.</p>
<p>Type in <code>git init webapi</code> to create a working directory with a git repository</p>
<p>Go into the folder by typing in <code>cd webapi</code></p>
<p>Type in <code>dotnet --list-sdks</code> to check what versions of dotnet core you have installed on your machine. This is required to see if you need to install the version that this tutorial requires. You should see something like this:</p>
<div class="admonition info">
<p class="admonition-title">Output of dotnet --list-sdks</p>
<div class="codehilite"><pre><span></span>$ dotnet --list-sdks
2.1.505 [/usr/local/share/dotnet/sdk]
2.2.104 [/usr/local/share/dotnet/sdk]
3.0.100-preview-010184 [/usr/local/share/dotnet/sdk]
3.0.100-preview3-010431 [/usr/local/share/dotnet/sdk]
</pre></div>

</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can find all of the dotnet core sdks <a href="https://dotnet.microsoft.com/download/dotnet-core">here</a>
But for this tutorial we are working with <a href="https://dotnet.microsoft.com/download/dotnet-core/2.1">this</a> version.</p>
</div>
<p>For this tutorial we are going to focus on version <strong>2.1.x</strong></p>
<p>Next type in <code>dotnet new global</code> to create a <strong>global.json</strong> file that you can use to specify what version of dotnet core you will use for the project.</p>
<ul>
<li>You will need to open this file in a code editor and change the version number to the version you have on your machine - I have 2.1.505</li>
</ul>
<div class="admonition info">
<p class="admonition-title">global.json</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;sdk&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;2.1.505&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

</div>
<p>Save and close the file.</p>
<p>Next create your project by typing in <code>dotnet new webapi -o api --no-https</code></p>
<p>We use the <code>--no-https</code> flag, because we are just going to be running this on our own machine. If you forget this option - the project will still work, but you will get a warning in your browser.</p>
<div class="admonition note">
<p class="admonition-title">Using different versions of the sdk</p>
<p>If you create the project before the <strong>global.json</strong> change, you will create a project with the newest version and some of the instructions below may not work.</p>
<p>However if you want to run this project with a later version of dotnet you just need to be aware that you may need to fix up a few minor things later on.</p>
</div>
<p>Next you will need to create a <strong>.gitignore</strong> file since we don't want to push all our binary and non essential files into our repository. </p>
<p>Open the  the <a href="https://raw.githubusercontent.com/dotnet/core/master/.gitignore"><strong>.gitignore</strong></a> file from the official dotnet core repository and paste it into your <strong>.gitignore</strong> file.</p>
<p>Back in the terminal start your project by typing in <code>dotnet run</code> and view your site by going to <a href="http://localhost:5000/api/values">http://localhost:5000/api/values</a></p>
<p>If you see the a json string with:</p>
<div class="admonition info">
<p class="admonition-title">Output of default api</p>
<div class="codehilite"><pre><span></span><span class="p">[</span>
  <span class="s2">&quot;value1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;value2&quot;</span>
<span class="p">]</span>
</pre></div>

</div>
<p>You now have a working api project and we can start making the changes we need to connect it to a database.</p>
<div class="admonition hint">
<p class="admonition-title">Hint for git users</p>
<ul>
<li>Do an initial commit to your repository type in:<br />
<code>git add .</code> followed by<br />
<code>git commit -m "Initial Commit"</code></li>
</ul>
<p>Making regular commits allows you to revert back to previous version of your code if you make an error.</p>
</div>
<h1 id="setting_up_the_database">Setting up the database<a class="headerlink" href="#setting_up_the_database" title="Permanent link">&para;</a></h1>
<p>At the moment we have installed the dotnet sdk on our machine and this is the easiest since we can just run the <code>dotnet</code> commands from our terminal.</p>
<p>However to run a MSSQL Server you will either need to go through a tedious installation process, if you are on a Windows machine or else up until a year or so ago (end of 2017) you were out of luck.</p>
<p>Now Microsoft has embraced the world of containers and it allows us to install it as part of a docker container.</p>
<p>So in your terminal (or docker-toolbox for windows git bash terminal) type the following in to download the 2017 version of MSSQL Server</p>
<div class="codehilite"><pre><span></span>docker pull mcr.microsoft.com/mssql/server:2017-latest-ubuntu 
</pre></div>

<p>After the download is complete type in:</p>
<div class="codehilite"><pre><span></span>docker run -e &#39;ACCEPT_EULA=Y&#39; -e &#39;SA_PASSWORD=yourStrong(*)Password&#39; -e &#39;MSSQL_PID=Express&#39; -p 1433:1433 --name webapi_mssql -d mcr.microsoft.com/mssql/server:2017-latest-ubuntu 
</pre></div>

<p>The password is set to <code>yourStrong(*)Password</code> which is the default password with the ! changed into an * - needless to say, you should probably change this, but it would be bad if I document my passwords here <img alt="ðŸ˜„" class="emojione" src="https://cdn.jsdelivr.net/emojione/assets/svg/1f604.svg" title=":smile:" /></p>
<p>Once that you have run that command, you mssql server is up and running, so let's leave that sitting there for the moment.</p>
<details class="hint"><summary>MSSQL checks</summary><p>If you are running the MSSQL database in Docker, your docker setup needs to have at least 2GB of RAM allocated to it. By default Docker Toolbox only allocated 1Gb to the machine. To fix this do this:</p>
<p><code>docker-machine stop</code> // this stops the docker machine</p>
<p>Change the amount of ram using the virtualbox GUI interface from 1024MB to 2048GB</p>
<p><code>docker-machine start</code> // this starts the docker machine    </p>
<p>You can now start the database server by typing in:</p>
<p><code>docker start webapi_mssql</code></p>
</details>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>If all of the stuff above went well, you now have your development environment setup. We will talk about setting up the production side of things later, but let's write some code ...</p>
</div>
<h1 id="populating_our_database_with_some_data">Populating our Database with some data<a class="headerlink" href="#populating_our_database_with_some_data" title="Permanent link">&para;</a></h1>
<p>We now need to open our project in our code editor. You should still be in your working directory (webapi) so just type in:</p>
<div class="codehilite"><pre><span></span><span class="c1"># if you are already in your project folder</span>
code .
</pre></div>

<p>This will open the project in Visual Studio Code.</p>
<p>Create a folder called <strong>sql</strong> add 2 files to that folder, call the files <strong>tables.sql</strong> and <strong>data.sql</strong> respectively.</p>
<p>You can view a set of SQL files in the code repository the table structure can be found <a href="https://github.com/to-jk11/SQLSVR-WEBAPI/blob/master/sql/tables.sql">here</a> and the data for part of the database can be found <a href="https://github.com/to-jk11/SQLSVR-WEBAPI/blob/master/sql/data.sql">here</a></p>
<p>Copy the contents of the files into your project files.</p>
<p>Next we need to install an extension so we can execute code, since vscode detected that you are creating sql files, it may have already prompted you to install it. Since we are working with MSSQL it will be the right extension. (Do not install this extension if you are working with MySQL)</p>
<p>In any case, if you missed the prompt or it didn't happen, you can type this in the terminal to install it.</p>
<div class="codehilite"><pre><span></span>code --install-extension ms-mssql.mssql
</pre></div>

<p>After the install is complete, you will need to connect vscode to your database, which you can do like this:</p>
<video src="https://d2ddoduugvun08.cloudfront.net/items/2Y0H1e0Z0w1h2z3p2U1l/vscode-setup-mssql-database-connection.mov" controls style="display: block;height: auto;width: 100%;">vscode-setup-mssql-database-connection.mov</video>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using docker toolbox, then your docker containers are inside of a Virtualbox VM.  </p>
<p>Instead of typing in localhost, you will need to type in the VM's ip address, which is: <code>192.168.99.100</code></p>
</div>
<p><br></p>
<p>Once you have the connection setup, go to the sql files and right click and select <code>Execute Query</code></p>
<p>Do this for the <strong>tables.sql</strong> first and then the <strong>data.sql</strong></p>
<p>You should see the results of the queries pop up in the side pane on the right, which you can close afterwards.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The above steps assume your database is still running in the docker container. So if you have any errors, check that first by typing in <code>docker ps -a</code> into the terminal</p>
</div>
<p>Once you have done these steps, you should run a test query on a table you have just created.</p>
<p>Create a new sql file called <strong>test.sql</strong> can paste this code into it.</p>
<div class="codehilite"><pre><span></span>Use Rugby7db
Go

SELECT * FROM game_schedule;
</pre></div>

<p>You can then right-click on it and run the query. You should see a whole lot of data. If you don't something went wrong.</p>
<h1 id="setup_ef_core_entity_framework">SETUP EF Core (Entity Framework)<a class="headerlink" href="#setup_ef_core_entity_framework" title="Permanent link">&para;</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This work is done inside of the <strong>api</strong> project folder, so in your terminal type in <code>cd api</code> so that you can the <code>dotnet</code> commands required.</p>
</div>
<p>Entity Framework is part of the dotnet family and allows for super easy integration of a database to an application, may it be web based or otherwise.</p>
<p>There are 2 approaches you can take:<br />
1) Code First or<br />
2) Data First. </p>
<p>Since we already have a database, let's look at the <strong>Data First</strong> option.</p>
<p>Open the <code>api.csproj</code> file inside the api folder and replace the <code>ItemGroup</code> tag with the code below.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These packages are aligned to work with dotnet core 2.1.x, so these will need to be updated if you are using a newer version.</p>
<div class="codehilite"><pre><span></span>&lt;ItemGroup&gt;
  &lt;PackageReference Include=&quot;Microsoft.AspNetCore.App&quot; /&gt;
  &lt;PackageReference Include=&quot;Microsoft.AspNetCore.Razor.Design&quot; Version=&quot;2.1.2&quot; PrivateAssets=&quot;All&quot; /&gt;
  &lt;PackageReference Include=&quot;Microsoft.EntityFrameworkCore&quot; Version=&quot;2.1.1&quot; /&gt;
  &lt;PackageReference Include=&quot;Microsoft.EntityFrameworkCore.SqlServer&quot; Version=&quot;2.1.1&quot; /&gt;
  &lt;PackageReference Include=&quot;Microsoft.EntityFrameworkCore.SqlServer.Design&quot; Version=&quot;1.1.6&quot; /&gt;
  &lt;PackageReference Include=&quot;Microsoft.EntityFrameworkCore.Tools&quot; Version=&quot;2.1.1&quot;&gt;
    &lt;IncludeAssets&gt;runtime; build; native; contentfiles; analyzers&lt;/IncludeAssets&gt;
    &lt;PrivateAssets&gt;all&lt;/PrivateAssets&gt;
  &lt;/PackageReference&gt;
&lt;/ItemGroup&gt;
</pre></div>

</div>
<p>Type in <code>dotnet restore</code> to install the nuget packages.</p>
<p>Next we need to create models for the tables in the database, so create a folder called <strong>Models</strong> and then run this command to have it create all the models for you.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need to change the credentials to suit your setup.
The DB Context is related to the sql files above, this would obviously be different if you are working on your own project.</p>
<div class="superfences-tabs">
<input name="__tabs_1" type="radio" id="__tab_1_0" checked="checked" />
<label for="__tab_1_0">Using Docker Native</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span>dotnet ef dbcontext scaffold <span class="s2">&quot;Server=localhost;Database=Rugby7db;User=sa;Password=yourStrong(*)Password;&quot;</span> Microsoft.EntityFrameworkCore.SqlServer -o Models -f -c Rugby7Context 
</pre></div></div>
<input name="__tabs_1" type="radio" id="__tab_1_1" />
<label for="__tab_1_1">Using Docker Toolbox</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span>dotnet ef dbcontext scaffold <span class="s2">&quot;Server=192.168.99.100;Database=Rugby7db;User=sa;Password=yourStrong(*)Password;&quot;</span> Microsoft.EntityFrameworkCore.SqlServer -o Models -f -c Rugby7Context 
</pre></div></div>
<input name="__tabs_1" type="radio" id="__tab_1_2" />
<label for="__tab_1_2">Using SQL EXPRESS</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span>dotnet ef dbcontext scaffold <span class="s2">&quot;Server=myServerAddress;Database=Rugby7db;Trusted_Connection=True;&quot;</span> Microsoft.EntityFrameworkCore.SqlServer -o Models -f -c Rugby7Context 
</pre></div></div>
</div>
</div>
<p>In your <strong>startup.cs</strong> file, add the following as your connection string and place it in the <code>ConfigureServices</code> under the <code>services.AddMvc().SetCompatibilityVersion(CompatibilityVersion.Version_2_1);</code> line paste this:</p>
<div class="superfences-tabs">
<input name="__tabs_2" type="radio" id="__tab_2_0" checked="checked" />
<label for="__tab_2_0">Using Docker Native</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span>// Connect to DB
string <span class="nv">connection</span> <span class="o">=</span> <span class="s2">&quot;Server=localhost;Database=Rugby7db;User=sa;Password=yourStrong(*)Password;&quot;</span><span class="p">;</span>

services.AddDbContext&lt;Rugby7Context&gt;<span class="o">(</span><span class="nv">options</span> <span class="o">=</span>&gt; options
        .UseSqlServer<span class="o">(</span>connection<span class="o">)</span>
<span class="o">)</span><span class="p">;</span>
</pre></div></div>
<input name="__tabs_2" type="radio" id="__tab_2_1" />
<label for="__tab_2_1">Using Docker Toolbox</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span>// Connect to DB
string <span class="nv">connection</span> <span class="o">=</span> <span class="s2">&quot;Server=192.168.99.100;Database=Rugby7db;User=sa;Password=yourStrong(*)Password;&quot;</span><span class="p">;</span>

services.AddDbContext&lt;Rugby7Context&gt;<span class="o">(</span><span class="nv">options</span> <span class="o">=</span>&gt; options
        .UseSqlServer<span class="o">(</span>connection<span class="o">)</span>
<span class="o">)</span><span class="p">;</span>
</pre></div></div>
<input name="__tabs_2" type="radio" id="__tab_2_2" />
<label for="__tab_2_2">Using SQL EXPRESS</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span>// Connect to DB
string <span class="nv">connection</span> <span class="o">=</span> <span class="s2">&quot;Server=myServerAddress;Database=Rugby7db;Trusted_Connection=True;&quot;</span><span class="p">;</span>

services.AddDbContext&lt;Rugby7Context&gt;<span class="o">(</span><span class="nv">options</span> <span class="o">=</span>&gt; options
        .UseSqlServer<span class="o">(</span>connection<span class="o">)</span>
<span class="o">)</span><span class="p">;</span>
</pre></div></div>
</div>
<p><img alt="Let's Code" src="https://memegenerator.net/img/instances/42970028/enough-talk-lets-code.jpg" /></p>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>So now that the database and models are setup, we are able to get to coding the API.</p>
</div>
<p>We will look at setting up the api controllers in the <a href="/dotnet_core/SQLSVR_WEBAPI/dotnet-2.1.x/02-create-api">next section</a></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Introduction
              </span>
            </div>
          </a>
        
        
          <a href="../02-create-api/" title="Creating an API" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Creating an API
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 and maintained by <a href="https://twitter.com/jwknz">Jeff Kranenburg</a>
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/jwknz" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://github.com/to-jk11" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://www.linkedin.com/in/jwknz" class="md-footer-social__link fa fa-linkedin"></a>
    
      <a href="https://twitter.com/jwknz" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.267712eb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../../.."}})</script>
      
    
  </body>
</html>