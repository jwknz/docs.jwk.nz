



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for repositories that I have made">
      
      
        <link rel="canonical" href="https://docs.jwk.nz/php/mvc-framework/06-exercise-2/">
      
      
        <meta name="author" content="Jeffrey Kranenburg">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Loading your database - docs.jwk.nz</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#loading_your_database" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://docs.jwk.nz/" title="docs.jwk.nz" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              docs.jwk.nz
            </span>
            <span class="md-header-nav__topic">
              
                Loading your database
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/jwknz/docs.jwk.nz/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    jwknz/docs.jwk.nz
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://docs.jwk.nz/" title="docs.jwk.nz" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    docs.jwk.nz
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/jwknz/docs.jwk.nz/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    jwknz/docs.jwk.nz
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="JWKNZ Docs" class="md-nav__link">
      JWKNZ Docs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Docker
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Docker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../docker/installing-docker-toolbox/" title="Installing docker toolbox" class="md-nav__link">
      Installing docker toolbox
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../docker/setup-virtualbox/" title="Setup virtualbox" class="md-nav__link">
      Setup virtualbox
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Dotnet core
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Dotnet core
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dotnet_core/" title="Dotnet Core" class="md-nav__link">
      Dotnet Core
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      SQLSVR WEBAPI
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        SQLSVR WEBAPI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dotnet_core/SQLSVR_WEBAPI/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-2" type="checkbox" id="nav-3-2-2">
    
    <label class="md-nav__link" for="nav-3-2-2">
      00 archive
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-2">
        00 archive
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-2-1" type="checkbox" id="nav-3-2-2-1">
    
    <label class="md-nav__link" for="nav-3-2-2-1">
      Dotnet 2.1.x
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-3-2-2-1">
        Dotnet 2.1.x
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dotnet_core/SQLSVR_WEBAPI/00-archive/dotnet-2.1.x/01-project-setup/" title="Project Setup" class="md-nav__link">
      Project Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dotnet_core/SQLSVR_WEBAPI/00-archive/dotnet-2.1.x/02-create-api/" title="Creating an API" class="md-nav__link">
      Creating an API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dotnet_core/SQLSVR_WEBAPI/00-archive/dotnet-2.1.x/03-exercise-01/" title="Exercises" class="md-nav__link">
      Exercises
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dotnet_core/SQLSVR_WEBAPI/00-archive/dotnet-2.1.x/04-testing-the-api/" title="Testing the api using VSCODE" class="md-nav__link">
      Testing the api using VSCODE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dotnet_core/SQLSVR_WEBAPI/00-archive/dotnet-2.1.x/05-adding-a-web-form/" title="Consuming the API" class="md-nav__link">
      Consuming the API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-3" type="checkbox" id="nav-3-2-3">
    
    <label class="md-nav__link" for="nav-3-2-3">
      01 dotnet 2.2.x
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-3">
        01 dotnet 2.2.x
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dotnet_core/SQLSVR_WEBAPI/01-dotnet-2.2.x/01-project-setup/" title="Project Setup" class="md-nav__link">
      Project Setup
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-4" type="checkbox" id="nav-3-2-4">
    
    <label class="md-nav__link" for="nav-3-2-4">
      02 after setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-4">
        02 after setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dotnet_core/SQLSVR_WEBAPI/02-after-setup/02-create-api/" title="Creating an API" class="md-nav__link">
      Creating an API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dotnet_core/SQLSVR_WEBAPI/02-after-setup/03-exercise-01/" title="Exercises" class="md-nav__link">
      Exercises
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dotnet_core/SQLSVR_WEBAPI/02-after-setup/04-testing-the-api/" title="Testing the api using VSCODE" class="md-nav__link">
      Testing the api using VSCODE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dotnet_core/SQLSVR_WEBAPI/02-after-setup/05-adding-a-web-form/" title="Consuming the API" class="md-nav__link">
      Consuming the API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Git
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Git
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../git/00_Installing_git/" title="Installing git" class="md-nav__link">
      Installing git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../git/01_what_is_git/" title="What is git" class="md-nav__link">
      What is git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../git/02_basic_commands/" title="Basic Commands" class="md-nav__link">
      Basic Commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../git/03_how_does_git_work/" title="How does it all work?" class="md-nav__link">
      How does it all work?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../git/04_basic_workflow/" title="Basic Workflow" class="md-nav__link">
      Basic Workflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../git/05_basic_workflow_images/" title="Git stages" class="md-nav__link">
      Git stages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../git/06_branches/" title="Using Branches" class="md-nav__link">
      Using Branches
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../git/07_gitignore/" title="Gitignore" class="md-nav__link">
      Gitignore
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../git/08_exercises/" title="Exercises" class="md-nav__link">
      Exercises
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../git/09_faqs/" title="GIT FAQ" class="md-nav__link">
      GIT FAQ
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Mern
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Mern
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../mern/" title="Creating a Web Api using MERN" class="md-nav__link">
      Creating a Web Api using MERN
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Package managers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Package managers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../package_managers/npm/" title="NPM - Node Package Manager" class="md-nav__link">
      NPM - Node Package Manager
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Php
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Php
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../01-container-setup/" title="Setup new container" class="md-nav__link">
      Setup new container
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2" checked>
    
    <label class="md-nav__link" for="nav-7-2">
      Mvc framework
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        Mvc framework
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../01-index/" title="Basic MVC Framework" class="md-nav__link">
      Basic MVC Framework
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02-setup/" title="Setup MVC Project" class="md-nav__link">
      Setup MVC Project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03-how-it-works/" title="How to setup MVC" class="md-nav__link">
      How to setup MVC
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04-mvc/" title="APP : Models - Views - Controllers" class="md-nav__link">
      APP : Models - Views - Controllers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../05-exercise-1/" title="Creating your first MVC Project" class="md-nav__link">
      Creating your first MVC Project
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Loading your database
      </label>
    
    <a href="./" title="Loading your database" class="md-nav__link md-nav__link--active">
      Loading your database
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#updating_the_model" title="Updating the Model" class="md-nav__link">
    Updating the Model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding_the_data_to_the_view" title="Adding the data to the View" class="md-nav__link">
    Adding the data to the View
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Web
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Web
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../web/01-introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../web/02-setting-up-project/" title="Project Setup" class="md-nav__link">
      Project Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../web/03-push-and-deploy/" title="Pushing our code to GitHub" class="md-nav__link">
      Pushing our code to GitHub
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../web/04-parcel/" title="Using parceljs" class="md-nav__link">
      Using parceljs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../web/05-exercises/" title="Exercises" class="md-nav__link">
      Exercises
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#updating_the_model" title="Updating the Model" class="md-nav__link">
    Updating the Model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding_the_data_to_the_view" title="Adding the data to the View" class="md-nav__link">
    Adding the data to the View
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/jwknz/docs.jwk.nz/edit/master/docs/php/mvc-framework/06-exercise-2.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="loading_your_database">Loading your database<a class="headerlink" href="#loading_your_database" title="Permanent link">&para;</a></h1>
<p>Create a <strong>data.sql</strong> file and place it in the <strong>sql</strong> folder.
When you have created that file copy the following into it:</p>
<div class="admonition note">
<p class="admonition-title">SQL Code</p>
<div class="codehilite"><pre><span></span><span class="n">use</span> <span class="n">containerdb</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">tbl_people</span> <span class="p">(</span>

    <span class="n">ID</span> <span class="nb">INT</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
    <span class="n">FNAME</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">LNAME</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>   
    <span class="n">DOB</span> <span class="nb">DATE</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">ID</span><span class="p">)</span>
<span class="p">)</span> <span class="n">AUTO_INCREMENT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">tbl_people</span> <span class="p">(</span><span class="n">FNAME</span><span class="p">,</span> <span class="n">LNAME</span><span class="p">,</span> <span class="n">DOB</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="s1">&#39;Taylor&#39;</span><span class="p">,</span> <span class="s1">&#39;1954-04-01&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">tbl_people</span> <span class="p">(</span><span class="n">FNAME</span><span class="p">,</span> <span class="n">LNAME</span><span class="p">,</span> <span class="n">DOB</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="s1">&#39;Lisa&#39;</span><span class="p">,</span> <span class="s1">&#39;Simpson&#39;</span><span class="p">,</span> <span class="s1">&#39;2010-03-23&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">tbl_people</span> <span class="p">(</span><span class="n">FNAME</span><span class="p">,</span> <span class="n">LNAME</span><span class="p">,</span> <span class="n">DOB</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="s1">&#39;Tim&#39;</span><span class="p">,</span> <span class="s1">&#39;Taylor&#39;</span><span class="p">,</span> <span class="s1">&#39;1968-11-10&#39;</span><span class="p">);</span>

<span class="n">use</span> <span class="n">containerdb</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">tbl_people</span><span class="p">;</span>
</pre></div>

</div>
<p>To able to add the code to the database, you will need to connect to the database first. To do that, make sure you have the extensions from above installed and do the following:</p>
<details class="note"><summary>Connect to the MySQL Database</summary><ol>
<li>In the left bar expand the MySQL section and click on the plus button</li>
</ol>
<p><img style="width:50%" src="../../../assets/images/MySQL-Add-New-Connection.png" alt="MySQL-Add-New-Connection" /></p>
<ol start="2">
<li>In the pop up at the top of the screen you will see an area when you can type in the host.</li>
</ol>
<p><img style="width:70%" src="../../../assets/images/MySQL-Add-Host.png" alt="MySQL-Add-Host" /></p>
<ol start="3">
<li>
<ol>
<li>If you are using Docker Toolbox type in <code>192.168.99.100</code></li>
</ol>
</li>
</ol>
<p><img style="width:70%" src="../../../assets/images/MySQL-Add-host-docker-toolbox.png" alt="MySQL-Add-host-docker-toolbox" /></p>
<ol start="3">
<li>
<ol start="2">
<li>If you are using Docker native type in <code>localhost</code></li>
</ol>
</li>
</ol>
<p><img style="width:70%" src="../../../assets/images/MySQL-Add-host-docker-native.png" alt="MySQL-Add-host-docker-native" /></p>
<ol start="4">
<li>Next type in the username to the database, in this case is <code>user</code></li>
</ol>
<p><img style="width:70%" src="../../../assets/images/MySQL-Add-Username.png" alt="MySQL-Add-Username" /></p>
<ol start="5">
<li>Next type in the password to the database, in this case is <code>user1234</code></li>
</ol>
<p><img style="width:70%" src="../../../assets/images/MySQL-Password.png" alt="MySQL-Add-Password" /></p>
<ol start="6">
<li>Next the port will be set to 3306 - leave this alone</li>
</ol>
<p><img style="width:70%" src="../../../assets/images/MySQL-Use-Default-Port.png" alt="MySQL-Use-Default-Port" /></p>
<ol start="7">
<li>Next the path to the certificate will be blank - leave this alone</li>
</ol>
<p><img style="width:70%" src="../../../assets/images/MySQL-Leave-Cert-Blank.png" alt="MySQL-Leave-Cert-Blank" /></p>
<ol start="8">
<li>The connection should now show up in the left panel of vscode.</li>
</ol>
</details>
<p>Once you have the database connection setup, open the <strong>data.sql</strong> that has the database code in it and right-click on an empty area in the code window and select <strong>Run MySQL Query</strong></p>
<p>If you have done all of this correctly, a side panel will open up and show you the following:</p>
<table>
<thead>
<tr>
<th align="left">ID</th>
<th align="left">FNAME</th>
<th align="left">LNAME</th>
<th align="left">DOB</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">1</td>
<td align="left">Bob</td>
<td align="left">Taylor</td>
<td align="left">Thu Apr 01 1954 00:00:00 GMT+1300 (NZDT)</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">Lisa</td>
<td align="left">Simpson</td>
<td align="left">Tue Mar 23 2010 00:00:00 GMT+1300 (NZDT)</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">Tim</td>
<td align="left">Taylor</td>
<td align="left">Sun Nov 10 1968 00:00:00 GMT+1300 (NZDT)</td>
</tr>
</tbody>
</table>
<h2 id="updating_the_model">Updating the Model<a class="headerlink" href="#updating_the_model" title="Permanent link">&para;</a></h2>
<p>In the model we can create a new function that returns data from the database. We don't need any parameters for this, so it will just be a simple <code>SELECT</code> statement.</p>
<p>First we need to establish the connection to the database, add the following code right below the class declaration</p>
<div class="admonition note">
<div class="codehilite"><pre><span></span>private $db;

public function __construct() {
    $this-&gt;db = new Database;
}
</pre></div>

</div>
<p>Next update your model with the following code by placing it below the title method:</p>
<div class="admonition note">
<div class="codehilite"><pre><span></span>public function getAllPeople() {
  $this-&gt;db-&gt;query(&#39;SELECT * FROM tbl_people&#39;);
  return $this-&gt;db-&gt;resultSet();
}
</pre></div>

<p>The function above sends the query to the database and calls the <code>resultSet()</code> method, which is defined in the <strong>libraries/Database.php</strong> file</p>
<p>The datatype this function returns will always be an array - even if it is only an array with a single index.</p>
</div>
<p>Adding this function to the controller is exactly the same as what we did with the title, so go to the <strong>People</strong> Controller and update the index action to this:</p>
<div class="admonition note">
<p class="admonition-title">Updated index action</p>
<div class="codehilite"><pre><span></span>public function index() {

  $title = $this-&gt;people-&gt;title();
  $allPeople = $this-&gt;people-&gt;getAllPeople();

  $data = [
    &#39;title&#39; =&gt; $title,
    &#39;allPeople&#39; =&gt; $allPeople
  ];

  return $this-&gt;view(&#39;people/view1&#39;, $data);
}
</pre></div>

<p>Just see how it is the same and the only thing we have added is the variable that calls the <code>getAllPeople()</code> function and passed it into the <code>$data</code> array.</p>
</div>
<h2 id="adding_the_data_to_the_view">Adding the data to the View<a class="headerlink" href="#adding_the_data_to_the_view" title="Permanent link">&para;</a></h2>
<p>Since the content of the <code>$allPeople</code> variable is an array, we need to loop through the data.</p>
<p>So back in the <code>view1.php</code> file add the following code:</p>
<div class="admonition note">
<p class="admonition-title">Looping through the data</p>
<div class="codehilite"><pre><span></span><span class="x">echo `&lt;br&gt;&lt;br&gt;`; //Only need this to create an empty line.</span>

<span class="x">$output = &quot;&quot;;</span>

<span class="x">foreach($data[&#39;allPeople&#39;] as $people) {</span>
<span class="x">  $output .= &#39;&lt;h2&gt;&#39;.$people[&#39;FNAME&#39;].&#39; &#39;.$people[&#39;LNAME&#39;].&#39;&lt;/h2&gt;&#39;;</span>
<span class="x">}</span>

<span class="x">echo $output;</span>
</pre></div>

</div>
<p>Now when you refresh the page, you will see an database connection error.<br />
To fix this, change the value of the DBHOST in the <code>.env</code> file to <code>mvcex01_db_1</code></p>
<p>The host of the database needs to be whatever your project is called in lower case followed by <code>_db_1</code>.</p>
<p>If you refresh your website now, you should see the following:</p>
<p><img alt="final-model" src="../../../assets/images/final-model.png" /></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../05-exercise-1/" title="Creating your first MVC Project" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Creating your first MVC Project
              </span>
            </div>
          </a>
        
        
          <a href="../../../web/01-introduction/" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Introduction
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 and maintained by <a href="https://twitter.com/jwknz">Jeff Kranenburg</a>
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/jwknz" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://github.com/to-jk11" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://www.linkedin.com/in/jwknz" class="md-footer-social__link fa fa-linkedin"></a>
    
      <a href="https://twitter.com/jwknz" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
  </body>
</html>